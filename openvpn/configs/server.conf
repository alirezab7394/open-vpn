# OpenVPN Server Configuration

# Network settings
port 1194
proto udp
dev tun

# SSL/TLS root certificate (ca), certificate (cert), and private key (key)
ca ca.crt
cert server.crt
key server.key

# Diffie hellman parameters
dh dh.pem

# Network topology
topology subnet

# Configure server mode and supply a VPN subnet
server 10.8.0.0 255.255.255.0

# Maintain a record of client <-> virtual IP address associations
ifconfig-pool-persist ipp.txt

# Push routes to the client to allow it to reach other private subnets
push "redirect-gateway def1 bypass-dhcp"
push "dhcp-option DNS 8.8.8.8"
push "dhcp-option DNS 8.8.4.4"

# Allow different clients to be able to "see" each other
client-to-client

# Keep alive settings
keepalive 10 120

# Cryptographic cipher
cipher AES-256-CBC

# Enable compression on the VPN link
comp-lzo

# The maximum number of concurrently connected clients
max-clients 100

# Run the OpenVPN server process with reduced privileges
user nobody
group nogroup

# The persist options will try to avoid accessing certain resources
persist-key
persist-tun

# Output a short status file
status openvpn-status.log

# Log file verbosity
verb 3

# Silence repeating messages
mute 20

# TLS authentication
tls-auth ta.key 0

# Certificate verification
remote-cert-tls client

# Perfect Forward Secrecy
tls-version-min 1.2
tls-cipher TLS-ECDHE-RSA-WITH-AES-256-GCM-SHA384:TLS-ECDHE-ECDSA-WITH-AES-256-GCM-SHA384:TLS-ECDHE-RSA-WITH-AES-256-CBC-SHA384:TLS-ECDHE-ECDSA-WITH-AES-256-CBC-SHA384

# Enable management interface
management localhost 7505

# Client configuration directory
client-config-dir /etc/openvpn/ccd

# Certificate revocation list
crl-verify crl.pem

# Log settings
log-append /var/log/openvpn.log

# Duplicate CN
duplicate-cn

# Push specific routes if needed
# push "route 192.168.1.0 255.255.255.0"

# Script security
script-security 2

# Status log
status-version 2

# Auth settings
auth SHA512

# Verify client certificate
verify-client-cert require

# Explicit exit notify
explicit-exit-notify 1 